(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{242:function(t,e,n){"use strict";function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){o=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o="undefined"!=typeof window&&window.cordova&&window.cordova.require("cordova/modulemapper"),r=o&&o.getOriginalSymbol(window,"File")||File,i=o&&o.getOriginalSymbol(window,"FileReader")||FileReader;function s(t){return new Promise(function(e,n){var a=new i;a.onload=function(){return e(a.result)},a.onerror=function(t){return n(t)},a.readAsDataURL(t)})}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise(function(a){for(var o=t.split(","),r=o[0].match(/:(.*?);/)[1],i=atob(o[1]),s=i.length,u=new Uint8Array(s);s--;)u[s]=i.charCodeAt(s);var c=new Blob([u],{type:r});c.name=e,c.lastModified=n,a(c)})}function c(t){return new Promise(function(e,n){var a=new Image;a.onload=function(){return e(a)},a.onerror=function(t){return n(t)},a.src=t})}function l(t){var e=a(g(t.width,t.height),2),n=e[0];return e[1].drawImage(t,0,0,n.width,n.height),n}function m(t){return new Promise(function(e,n){var a,o,r=function(){try{return o=l(a),e([a,o])}catch(t){return n(t)}},i=function(e){try{return s(t).then(function(t){try{return c(t).then(function(t){try{return a=t,r()}catch(t){return n(t)}},n)}catch(t){return n(t)}},n)}catch(t){return n(t)}};try{return createImageBitmap(t).then(function(t){try{return a=t,r()}catch(t){return i()}},i)}catch(t){i()}})}function f(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise(function(r,i){var s;return"function"==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?t.convertToBlob({type:e,quality:o}).then(function(t){try{return(s=t).name=n,s.lastModified=a,c.call(this)}catch(t){return i(t)}}.bind(this),i):u(t.toDataURL(e,o),n,a).then(function(t){try{return s=t,c.call(this)}catch(t){return i(t)}}.bind(this),i);function c(){return r(s)}})}function p(t){return new Promise(function(e,n){var a=new i;a.onload=function(t){var n=new DataView(t.target.result);if(65496!=n.getUint16(0,!1))return e(-2);for(var a=n.byteLength,o=2;o<a;){if(n.getUint16(o+2,!1)<=8)return e(-1);var r=n.getUint16(o,!1);if(o+=2,65505==r){if(1165519206!=n.getUint32(o+=2,!1))return e(-1);var i=18761==n.getUint16(o+=6,!1);o+=n.getUint32(o+4,i);var s=n.getUint16(o,i);o+=2;for(var u=0;u<s;u++)if(274==n.getUint16(o+12*u,i))return e(n.getUint16(o+12*u+8,i))}else{if(65280!=(65280&r))break;o+=n.getUint16(o,!1)}}return e(-1)},a.onerror=function(t){return n(t)},a.readAsArrayBuffer(t)})}function d(t,e){var n,o=t.width,r=t.height,i=e.maxWidthOrHeight,s=t;if(Number.isInteger(i)&&(o>i||r>i)){var u=a(g(o,r),2);s=u[0],n=u[1],o>r?(s.width=i,s.height=r/o*i):(s.width=o/r*i,s.height=i),n.drawImage(t,0,0,s.width,s.height)}return s}function h(t,e){var n=t.width,o=t.height,r=a(g(n,o),2),i=r[0],s=r[1];switch(4<e&&e<9?(i.width=o,i.height=n):(i.width=n,i.height=o),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,o);break;case 4:s.transform(1,0,0,-1,0,o);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,o,0);break;case 7:s.transform(0,-1,-1,0,o,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,o),i}function g(t,e){var n,a;try{a=(n=new OffscreenCanvas(t,e)).getContext("2d")}catch(t){a=(n=document.createElement("canvas")).getContext("2d")}return n.width=t,n.height=e,[n,a]}function y(t,e){return new Promise(function(n,o){var r,i,s,u,c,l,y;return r=e.maxIteration||10,i=1024*e.maxSizeMB*1024,m(t).then(function(m){try{var b=a(m,2);return s=b[0],u=d(u=b[1],e),new Promise(function(n,a){var o;if(!(o=e.exifOrientation))return p(t).then(function(t){try{return o=t,r.call(this)}catch(t){return a(t)}}.bind(this),a);function r(){return n(o)}return r.call(this)}).then(function(m){try{return e.exifOrientation=m,u=h(u,e.exifOrientation),c=1,f(u,t.type,t.name,t.lastModified,c).then(function(e){try{var m,p=function e(){if(r--&&y.size>i){var n,l,m,p=a(g(n=.9*u.width,l=.9*u.height),2);return m=p[0],p[1].drawImage(s,0,0,n,l),"image/jpeg"===t.type&&(c*=.9),f(m,t.type,t.name,t.lastModified,c).then(function(t){try{return y=t,u=m,e}catch(t){return o(t)}},o)}return[1]},d=function(){return n(y)};return(l=e).size<=i?n(l):(y=l,(m=function(t){for(;t;){if(t.then)return void t.then(m,o);try{if(t.pop){if(t.length)return t.pop()?d.call(this):t;t=p}else t=t.call(this)}catch(t){return o(t)}}}.bind(this))(p))}catch(t){return o(t)}}.bind(this),o)}catch(t){return o(t)}}.bind(this),o)}catch(t){return o(t)}}.bind(this),o)})}var b,v=0,w=function(t){return new Worker(URL.createObjectURL(new Blob(["(".concat(t,")()")])))}(function(){var t=!1;self.addEventListener("message",function(e){return new Promise(function(n,a){var o,r,i,s,u=e.data;o=u.file,r=u.id,i=u.imageCompressionLibUrl,s=u.options;var c=function(){try{return n()}catch(t){return a(t)}},l=function(t){try{return self.postMessage({error:t.message,id:r}),c()}catch(t){return a(t)}};try{var m;return t||(importScripts(i),t=!0),I(o,s).then(function(t){try{return m=t,self.postMessage({file:m,id:r}),c()}catch(t){return l(t)}},l)}catch(t){l(t)}})})});function _(t,e){return new Promise(function(n,a){return new Promise(function(o,r){b||(b=function(t){return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}("\n    function imageCompression (){return (".concat(I,").apply(null, arguments)}\n\n    imageCompression.getDataUrlFromFile = ").concat(I.getDataUrlFromFile,"\n    imageCompression.getFilefromDataUrl = ").concat(I.getFilefromDataUrl,"\n    imageCompression.loadImage = ").concat(I.loadImage,"\n    imageCompression.drawImageInCanvas = ").concat(I.drawImageInCanvas,"\n    imageCompression.drawFileInCanvas = ").concat(I.drawFileInCanvas,"\n    imageCompression.canvasToFile = ").concat(I.canvasToFile,"\n    imageCompression.getExifOrientation = ").concat(I.getExifOrientation,"\n    imageCompression.handleMaxWidthOrHeight = ").concat(I.handleMaxWidthOrHeight,"\n    imageCompression.followExifOrientation = ").concat(I.followExifOrientation,"\n\n    getDataUrlFromFile = imageCompression.getDataUrlFromFile\n    getFilefromDataUrl = imageCompression.getFilefromDataUrl\n    loadImage = imageCompression.loadImage\n    drawImageInCanvas = imageCompression.drawImageInCanvas\n    drawFileInCanvas = imageCompression.drawFileInCanvas\n    canvasToFile = imageCompression.canvasToFile\n    getExifOrientation = imageCompression.getExifOrientation\n    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight\n    followExifOrientation = imageCompression.followExifOrientation\n\n    getNewCanvasAndCtx = ").concat(g,"\n    \n    CustomFileReader = FileReader\n    \n    CustomFile = File\n    \n    function _slicedToArray(arr, n) { return arr }\n\n    function compress (){return (").concat(y,").apply(null, arguments)}\n    ")));var i=v++;return w.addEventListener("message",function t(e){e.data.id===i&&(w.removeEventListener("message",t),e.data.error&&a(e.data.error),n(e.data.file))}),w.postMessage({file:t,id:i,imageCompressionLibUrl:b,options:e}),o()})})}function I(t,e){return new Promise(function(n,a){var o,i;if(e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,e.useWebWorker="boolean"!=typeof e.useWebWorker||e.useWebWorker,!(t instanceof Blob||t instanceof r))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return a(new Error("The file given is not an image"));if(i="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!e.useWebWorker||"function"!=typeof Worker||i)return y(t,e).then(function(t){try{return o=t,c.call(this)}catch(t){return a(t)}}.bind(this),a);var s=function(){try{return c.call(this)}catch(t){return a(t)}}.bind(this),u=function(n){try{return console.warn("Run compression in web worker failed:",n,", fall back to main thread"),y(t,e).then(function(t){try{return o=t,s()}catch(t){return a(t)}},a)}catch(t){return a(t)}};try{return _(t,e).then(function(t){try{return o=t,s()}catch(t){return u(t)}},u)}catch(t){u(t)}function c(){try{o.name=t.name,o.lastModified=t.lastModified}catch(t){}return n(o)}})}I.getDataUrlFromFile=s,I.getFilefromDataUrl=u,I.loadImage=c,I.drawImageInCanvas=l,I.drawFileInCanvas=m,I.canvasToFile=f,I.getExifOrientation=p,I.handleMaxWidthOrHeight=d,I.followExifOrientation=h;var C=I,A=n(54);n.d(e,"a",function(){return M});var U=function(t,e,n,a){return new(n||(n=Promise))(function(o,r){function i(t){try{u(a.next(t))}catch(t){r(t)}}function s(t){try{u(a.throw(t))}catch(t){r(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((a=a.apply(t,e||[])).next())})},P=function(t,e){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(t){r=[6,t],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},M=function(){function t(){}return t.prototype.stringToDataYmd=function(t){return t?new Date(t.substring(0,4)+"/"+t.substring(4,6)+"/"+t.substring(6,8)):new Date},t.prototype.dateNowCompare=function(t){var e=new Date,n=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),r=t.getFullYear(),i=t.getMonth()+1,s=t.getDate();return n===r?a===i?o<s?1:o===s?0:-1:a<i?1:-1:n<r?1:-1},t.prototype.encodeUrl=function(t){return t?t.replace(/\:/g,"%3A").replace(/\//g,"%2F"):t},t.prototype.getCompressImageFileAsync=function(t){return U(this,void 0,void 0,function(){var e,n;return P(this,function(a){switch(a.label){case 0:e={maxSizeMB:A.a.SYSTEM.MAX_IMG_UPLOAD_SIZE_MB},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,C(t,e)];case 2:return[2,a.sent()];case 3:throw n=a.sent(),console.error("getCompressImageFileAsync is error",n),n;case 4:return[2]}})})},t}()},255:function(t,e,n){var a=n(300);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(16).default)("02e3858a",a,!1,{})},299:function(t,e,n){"use strict";var a=n(255);n.n(a).a},300:function(t,e,n){(t.exports=n(15)(!1)).push([t.i,".wrapper[data-v-59b4ba1f],messageEntry[data-v-59b4ba1f]{position:relative}",""])},321:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"container marginTopAdd"},[t.bounty.account.profileImageUrl?n("div",{staticClass:"bountyIcon",style:{"background-image":"url("+t.bounty.account.profileImageUrl+")"}}):n("div",{staticClass:"bountyIcon",style:{"background-image":"url(/img/icon_blank.svg)"}}),t._v(" "),n("nuxt-link",{staticClass:"bountyArtistName",attrs:{to:"/artists/"+t.bounty.account.accountName}},[t._v(t._s(t.bounty.account.displayName))])],1),t._v(" "),t.bounty.bountyImageUrl?n("div",{staticClass:"mainVisual myPage bounty1",style:{"background-image":"url("+t.bounty.bountyImageUrl+")"}}):n("div",{staticClass:"mainVisual myPage bounty1",style:{"background-image":"url(/img/project_blank.jpg)"}}),t._v(" "),n("div",{staticClass:"mypageTop"},[n("div",{staticClass:"container"},[n("div",{staticClass:"profileArea"},[n("h3",{staticClass:"bountyTitle"},[t._v(t._s(t.bounty.bountyName))]),t._v(" "),n("div",{staticClass:"snsShare"},[n("a",{staticClass:"twitter-share-button",attrs:{href:"https://twitter.com/share?ref_src=twsrc%5Etfw","data-show-count":"false"}},[t._v("Tweet")]),t._v(" "),n("script",{attrs:{async:"",src:"https://platform.twitter.com/widgets.js",charset:"utf-8"}}),t._v(" "),n("iframe",{staticStyle:{border:"none",overflow:"hidden"},attrs:{src:"https://www.facebook.com/plugins/share_button.php?href="+t.faceBookShareUrl+"&layout=button&size=small&width=61&height=20&appId",width:"61",height:"20",scrolling:"no",frameborder:"0",allowTransparency:"true",allow:"encrypted-media"}})]),t._v(" "),1==t.isOwn?n("div",[n("div",{staticClass:"textRight top60"},[n("a",{staticClass:"rewardButton ChangeButton",on:{click:function(e){t.allowPush("/account/my/bounties/create?bountyId="+t.bounty.bountyId)}}},[t._v("編集する")])]),t._v(" "),n("div",{staticClass:"projectData"},[t._v("ステータス："+t._s(t.bountyStatsName))])]):t._e(),t._v(" "),n("div",{staticClass:"projectData"},[n("p",[t._v("残り："),n("span",[t._v(t._s(t._f("toDaysLeft")(t.bounty.participationEndDate)))])]),t._v(" "),n("p",[t._v("報酬ポイント："),n("span",[t._v(t._s(t._f("zeroToNone")(t._f("toLocaleString")(t.bounty.quantity)))+t._s(t._f("delete")(t.pointName,0==t.bounty.quantity||null==t.bounty.quantity)))])]),t._v(" "),n("p",[t._v("参加人数："),n("span",[t._v(t._s(t.bounty.joinCount)+"/"+t._s(t.bounty.participantLimit)+" 人")])])]),t._v(" "),n("div",{staticClass:"grad-wrap"},[n("input",{staticClass:"grad-trigger",attrs:{id:"trigger1",type:"checkbox"}}),t._v(" "),n("label",{staticClass:"grad-btn",attrs:{for:"trigger1"}}),t._v(" "),n("div",{staticClass:"grad-item bounty"},[n("p",{directives:[{name:"linkified",rawName:"v-linkified"}],domProps:{innerHTML:t._s(t.$options.filters.newLine(t.bounty.description))}})])])])]),t._v(" "),n("div",{staticClass:"menuBg"},[n("div",{staticClass:"container"},[n("div",{staticClass:"contentsArea"},[n("ul",{staticClass:"flexMenu bountyMenu"},[n("li",{class:{here:1==t.tabNum}},[1==t.tabNum?n("div",[t._v("応援行動　")]):n("div",[n("a",{on:{click:function(e){t.tabNumChange(1)}}},[t._v("応援行動　")])])]),t._v(" "),n("li",{class:{here:2==t.tabNum}},[2==t.tabNum?n("div",[t._v("応援者    ")]):n("div",[n("a",{on:{click:function(e){t.tabNumChange(2)}}},[t._v("応援者   ")])])]),t._v(" "),n("li",{class:{here:3==t.tabNum}},[3==t.tabNum?n("div",[t._v("チャット  ")]):n("div",[n("a",{on:{click:function(e){t.tabNumChange(3)}}},[t._v("チャット　")])])])])])])])]),t._v(" "),n("div",{staticClass:"container"},[1==t.tabNum?n("div",{staticClass:"bountyList personalItem"},t._l(t.bountyActions,function(e){return n("CardBox",{key:e.bountyActionId,attrs:{backgroundImageUrl:e.bountyActionImageUrl,titleName:e.bountyActionName,description:e.description,bountyId:e.bountyId,bountyActionNo:e.bountyActionNo,isOwn:t.isOwn,joinStatus:e.joinStatus,thanksMessage:t.bounty.thanksMessage,thanksProfileImageUrl:t.bounty.account.profileImageUrl,dialogProfileImageUrl:t.bounty.account.profileImageUrl,joinCount:t.bounty.joinCount,participantLimit:t.bounty.participantLimit,completeStatus:t.bounty.completeStatus,actionJoinCount:e.joinCount,bauntyCanJoin:t.bauntyCanJoin,bountyTypeForAction:t.bounty.bountyType},on:{refreshJoin:function(e){t.refreshJoin()}}})}),1):2==t.tabNum?n("div",{staticClass:"activityArea"},[t._l(t.bountyJoins,function(e){return n("CardUser",{key:e.accountId,attrs:{profileImageUrl:e.profileImageUrl,displayName:e.displayName,date:e.createDateTime,accountName:e.accountName,isJoin:!0,dialogProfileImageUrl:t.bounty.account.profileImageUrl}})}),t._v(" "),n("infinite-loading",{on:{infinite:t.infiniteHandlerJoins}},[n("span",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),n("span",{attrs:{slot:"no-results"},slot:"no-results"})])],2):3==t.tabNum?n("div",{staticClass:"activityArea"},[t._l(t.bountyComments,function(e){return n("CardUser",{key:e.bountyCommentId,attrs:{profileImageUrl:e.account.profileImageUrl,displayName:e.account.displayName,date:e.postedDateTime,accountName:e.account.accountName,description:e.comment,commentId:e.bountyCommentId,replyBountyComment:e.replyComment,commentLikeCount:e.likeCount,commentLikeQuantity:e.likeQuantity,dialogProfileImageUrl:t.bounty.account.profileImageUrl,canPostComment:t.bounty.canPostComment,commentAccountName:e.account.accountName,commentType:"Bounty"},on:{refreshComment:function(e){t.refreshComment()}}})}),t._v(" "),n("infinite-loading",{on:{infinite:t.infiniteHandlerComments}},[n("span",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),n("span",{attrs:{slot:"no-results"},slot:"no-results"})]),t._v(" "),n("div",{staticClass:"fixedBottom"},[n("div",{staticClass:"messageEntry"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{name:"discription",rows:"4",cols:"30",placeholder:"メッセージ",disabled:!t.bounty.canPostComment},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),n("input",{staticClass:"submitButton",class:{disable:t.isProcessing||!t.bounty.canPostComment},attrs:{type:"button",value:"送信する"},on:{click:function(e){t.addComment(t.message)}}})])])],2):t._e()]),t._v(" "),t.showModalDialog?n("ModalDialog",{attrs:{messages:t.dialogMessage,imageUrl:t.dialogImageUrl},on:{close:function(e){t.closeModalDialog()}}}):t._e()],1)};a._withStripped=!0;var o,r=n(1),i=n(54),s=n(242),u=n(246),c=n(241),l=n(266),m=n(235),f=n(240),p=n.n(f),d=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t,e,n,a){var o,r=arguments.length,i=r<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},g=function(t,e,n,a){return new(n||(n=Promise))(function(o,r){function i(t){try{u(a.next(t))}catch(t){r(t)}}function s(t){try{u(a.throw(t))}catch(t){r(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((a=a.apply(t,e||[])).next())})},y=function(t,e){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(t){r=[6,t],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};r.Vue.directive("linkified",p.a);var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabNum=1,e.message=null,e.isProcessing=!1,e.isCommontSecret=!1,e.offsetJoins=i.a.API_PARAM.LIMIT_DEFAULT,e.offsetComments=i.a.API_PARAM.LIMIT_DEFAULT,e.showModalDialog=!1,e}return d(e,t),e.prototype.asyncData=function(t){var e=t.app,n=t.route,a=t.store;return g(this,void 0,void 0,function(){var t,o,r,u,c,l,m,f,p,d,h,g,b;return y(this,function(y){switch(y.label){case 0:return t="",o=!1,r=[""],[4,e.$axios.$get(i.a.API_URL.BOUNTIES+"/"+n.params.id)];case 1:return u=y.sent(),[4,e.$axios.$get(i.a.API_URL.BOUNTIES_ACTIONS.replace("{bounty_id}",n.params.id),{params:{offset:i.a.API_PARAM.OFFSET_DEFAULT,limit:i.a.API_PARAM.LIMIT_DEFAULT,sort:i.a.API_PARAM.SORT_NEW}})];case 2:return c=y.sent(),[4,e.$axios.$get(i.a.API_URL.BOUNTIES_JOIN.replace("{bounty_id}",n.params.id),{params:{offset:i.a.API_PARAM.OFFSET_DEFAULT,limit:i.a.API_PARAM.LIMIT_DEFAULT,sort:i.a.API_PARAM.SORT_NEW}})];case 3:return l=y.sent(),[4,e.$axios.$get(i.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",n.params.id),{params:{offset:i.a.API_PARAM.OFFSET_DEFAULT,limit:i.a.API_PARAM.LIMIT_DEFAULT}}).catch(function(t){return 400===t.response.status&&(o=!0,r=t.response.data.BadRequest),[{account:null,bountyId:null,bountyCommentId:null,comment:null,postedDateTime:null,replyCommentId:null,replyComment:null,clientCode:null,credentialId:null}]})];case 4:if(m=y.sent(),f=!1,u.account.accountName===a.state.myProfile.accountName&&(f=!0),a.state.myProfile.permissions)for(p=0,d=a.state.myProfile.permissions;p<d.length;p++)"A"===d[p]&&(o=!1);return t=1===u.completeStatus?"達成":2===u.completeStatus?"終了":1===u.publishStatus?"公開中":0===u.createStatus?"作成中":"非公開",h=!0,g=new s.a,u.participationEndDate&&1!==u.publishStatus&&(h=!1),g.dateNowCompare(g.stringToDataYmd(u.participationEndDate))<0&&(h=!1),u.joinCount&&u.participantLimit&&Number(u.joinCount)>=Number(u.participantLimit)&&(h=!1),b=i.a.POINT.WIP,[2,{bounty:u,bountyActions:c,bountyJoins:l,bountyComments:m,isOwn:f,pointName:b,isCommontSecret:o,isCommontSecretMessage:r,bountyStatsName:t,bauntyCanJoin:h,dialogImageUrl:i.a.TemplateImg.DIALOG_IMG_URL,faceBookShareUrl:g.encodeUrl("https://uliiq-wishhub.azurewebsites.net/bounties/"+u.bountyId)}]}})})},e.prototype.head=function(){return{title:"WishHub（ウィッシュハブ）|"+this.bounty.bountyName,meta:[{hid:"og:type",property:"og:type",content:"article"},{hid:"og:description",property:"og:description",content:this.bounty.description},{hid:"og:url",property:"og:url",content:"https://uliiq-wishhub.azurewebsites.net/bounties/"+this.bounty.bountyId},{hid:"og:image",property:"og:image",content:this.bounty.bountyImageUrl},{hid:"og:site_name",property:"og:site_name",content:"WishHub（ウィッシュハブ）|"+this.bounty.bountyName},{hid:"twitter:title",property:"twitter:title",content:"WishHub（ウィッシュハブ）|"+this.bounty.bountyName},{hid:"twitter:description",property:"twitter:description",content:this.bounty.description},{hid:"twitter:image",property:"twitter:image",content:this.bounty.bountyImageUrl}]}},e.prototype.tabNumChange=function(t){3===t&&this.isCommontSecret?this.openModalDialog(this.isCommontSecretMessage):this.tabNum=t},e.prototype.addComment=function(t){return g(this,void 0,void 0,function(){var e,n,a=this;return y(this,function(o){switch(o.label){case 0:return this.isProcessing||!this.bounty.canPostComment?[2]:(this.isProcessing=!0,[4,this.$msalWishHub.silentLogin()]);case 1:return e=o.sent(),[4,this.$store.dispatch("addAccessToken",e)];case 2:return o.sent(),n=new FormData,t?(n.append("BountyId",this.$route.params.id),n.append("Comment",t),[4,this.$axios.post(i.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",this.$route.params.id),n).then(function(){a.refreshComment(),a.message=null}).catch(function(t){400===t.response.status?a.openModalDialog(t.response.data.BadRequest):401===t.response.status?(a.openModalDialog(i.a.MESSAGE.ERR_401),a.$store.dispatch("logout")):a.openModalDialog(i.a.MESSAGE.ERR_ELSE)})]):[3,4];case 3:o.sent(),o.label=4;case 4:return this.isProcessing=!1,[2]}})})},e.prototype.refreshComment=function(){var t=this;this.$axios.get(i.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",this.$route.params.id)).then(function(e){t.bountyComments=e.data}).catch(function(t){console.log(t)})},e.prototype.refreshJoin=function(){var t=this;this.$axios.get(i.a.API_URL.BOUNTIES_JOIN.replace("{bounty_id}",this.$route.params.id),{params:{offset:i.a.API_PARAM.OFFSET_DEFAULT,limit:i.a.API_PARAM.LIMIT_DEFAULT,sort:i.a.API_PARAM.SORT_NEW}}).then(function(e){t.bountyJoins=e.data,t.$axios.get(i.a.API_URL.BOUNTIES+"/"+t.$route.params.id).then(function(e){t.bounty=e.data,t.refreshComment(),t.isCommontSecret=!1}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)}),this.$axios.get(i.a.API_URL.BOUNTIES_ACTIONS.replace("{bounty_id}",this.$route.params.id),{params:{offset:i.a.API_PARAM.OFFSET_DEFAULT,limit:i.a.API_PARAM.LIMIT_DEFAULT,sort:i.a.API_PARAM.SORT_NEW}}).then(function(e){t.bountyActions=e.data}).catch(function(t){console.log(t)})},e.prototype.allowPush=function(t){var e=this;this.$store.dispatch("transitionAllow").then(function(){e.$router.push(t)})},e.prototype.openModalDialog=function(t){this.dialogMessage=t,this.showModalDialog=!0},e.prototype.closeModalDialog=function(){this.showModalDialog=!1},e.prototype.infiniteHandlerJoins=function(t){var e=this;2===this.tabNum&&this.$axios.get(i.a.API_URL.BOUNTIES_JOIN.replace("{bounty_id}",this.$route.params.id),{params:{offset:this.offsetJoins,limit:i.a.API_PARAM.LIMIT_DEFAULT,sort:i.a.API_PARAM.SORT_NEW}}).then(function(n){var a;n.data.length?(e.offsetJoins+=i.a.API_PARAM.LIMIT_DEFAULT,(a=e.bountyJoins).push.apply(a,n.data),t.loaded()):t.complete()}).catch(function(e){t.complete()})},e.prototype.infiniteHandlerComments=function(t){var e=this;3===this.tabNum&&this.$axios.get(i.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",this.$route.params.id),{params:{offset:this.offsetComments,limit:i.a.API_PARAM.LIMIT_DEFAULT}}).then(function(n){var a;n.data.length?(e.offsetComments+=i.a.API_PARAM.LIMIT_DEFAULT,(a=e.bountyComments).push.apply(a,n.data),t.loaded()):t.complete()}).catch(function(e){t.complete()})},e=h([Object(r.Component)({components:{CardUser:u.a,CardBox:c.a,BountyType:l.a,ModalDialog:m.a}})],e)}(r.Vue),v=(n(299),n(5)),w=Object(v.a)(b,a,[],!1,null,"59b4ba1f",null);e.default=w.exports}}]);