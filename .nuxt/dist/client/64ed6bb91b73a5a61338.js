(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{234:function(t,e,o){var n=o(279);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,o(20).default)("71261006",n,!1,{})},278:function(t,e,o){"use strict";var n=o(234);o.n(n).a},279:function(t,e,o){(t.exports=o(19)(!1)).push([t.i,".wrapper[data-v-51bfe4b2],messageEntry[data-v-51bfe4b2]{position:relative}",""])},304:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrapper"},[o("div",{staticClass:"container marginTopAdd"},[t.bounty.account.profileImageUrl?o("div",{staticClass:"bountyIcon",style:{"background-image":"url("+t.bounty.account.profileImageUrl+")"}}):o("div",{staticClass:"bountyIcon",style:{"background-image":"url(/img/icon_blank.svg)"}}),t._v(" "),o("nuxt-link",{staticClass:"bountyArtistName",attrs:{to:"/artists/"+t.bounty.account.accountName}},[t._v(t._s(t.bounty.account.displayName))])],1),t._v(" "),t.bounty.bountyImageUrl?o("div",{staticClass:"mainVisual myPage bounty1",style:{"background-image":"url("+t.bounty.bountyImageUrl+")"}}):o("div",{staticClass:"mainVisual myPage bounty1",style:{"background-image":"url(/img/project_blank.jpg)"}}),t._v(" "),o("div",{staticClass:"mypageTop"},[o("div",{staticClass:"container"},[o("div",{staticClass:"profileArea"},[o("h3",{staticClass:"bountyTitle"},[t._v(t._s(t.bounty.bountyName))]),t._v(" "),o("div",{staticClass:"snsShare"},[o("a",{staticClass:"twitter-share-button",attrs:{href:"https://twitter.com/share?ref_src=twsrc%5Etfw","data-show-count":"false"}},[t._v("Tweet")]),t._v(" "),o("script",{attrs:{async:"",src:"https://platform.twitter.com/widgets.js",charset:"utf-8"}}),t._v(" "),o("iframe",{staticStyle:{border:"none",overflow:"hidden"},attrs:{src:"https://www.facebook.com/plugins/share_button.php?href="+t.faceBookShareUrl+"&layout=button&size=small&width=61&height=20&appId",width:"61",height:"20",scrolling:"no",frameborder:"0",allowTransparency:"true",allow:"encrypted-media"}})]),t._v(" "),1==t.isOwn?o("div",[o("div",{staticClass:"textRight top60"},[o("a",{staticClass:"rewardButton ChangeButton",on:{click:function(e){t.allowPush("/account/my/bounties/create?bountyId="+t.bounty.bountyId)}}},[t._v("編集する")])]),t._v(" "),o("div",{staticClass:"projectData"},[t._v("ステータス："+t._s(t.bountyStatsName))])]):t._e(),t._v(" "),o("div",{staticClass:"projectData"},[o("BountyType",{attrs:{bountyType:t.bounty.bountyType}}),t._v(" "),o("p",[t._v("参加人数："),o("span",[t._v(t._s(t.bounty.joinCount)+"/"+t._s(t.bounty.participantLimit)+" 人")])]),t._v(" "),o("p",[t._v("残り："),o("span",[t._v(t._s(t._f("toDaysLeft")(t.bounty.participationEndDate)))])])],1),t._v(" "),o("div",{staticClass:"grad-wrap"},[o("input",{staticClass:"grad-trigger",attrs:{id:"trigger1",type:"checkbox"}}),t._v(" "),o("label",{staticClass:"grad-btn",attrs:{for:"trigger1"}}),t._v(" "),o("div",{staticClass:"grad-item bounty"},[o("p",{directives:[{name:"linkified",rawName:"v-linkified"}],domProps:{innerHTML:t._s(t.$options.filters.newLine(t.bounty.description))}})])]),t._v(" "),0==t.isOwn&&1==t.bounty.joinStatus&&3==t.bounty.completeStatus?o("div",[o("p",{staticClass:"textCenter"},[o("a",{staticClass:"textLink modal-syncer marginUnder30 startButton",on:{click:function(e){t.approvalBounty(t.bounty.bountyId)}}},[t._v("承認する")])])]):t._e()])]),t._v(" "),o("div",{staticClass:"menuBg"},[o("div",{staticClass:"container"},[o("div",{staticClass:"contentsArea"},[o("ul",{staticClass:"flexMenu bountyMenu"},[o("li",{class:{here:1==t.tabNum}},[1==t.tabNum?o("div",[t._v("メンバー募集")]):o("div",[o("a",{on:{click:function(e){t.tabNumChange(1)}}},[t._v("メンバー募集　　")])])]),t._v(" "),o("li",{class:{here:2==t.tabNum}},[2==t.tabNum?o("div",[t._v("パーティ　　")]):o("div",[o("a",{on:{click:function(e){t.tabNumChange(2)}}},[t._v("パーティ　　")])])]),t._v(" "),o("li",{class:{here:3==t.tabNum}},[3==t.tabNum?o("div",[t._v("活動報告　　")]):o("div",[o("a",{on:{click:function(e){t.tabNumChange(3)}}},[t._v("活動報告　　")])])])])])])])]),t._v(" "),o("div",{staticClass:"container"},[1==t.tabNum?o("div",{staticClass:"bountyList personalItem"},t._l(t.bountyActions,function(e){return o("CardBox",{key:e.bountyActionId,attrs:{backgroundImageUrl:e.bountyActionImageUrl,titleName:e.bountyActionName,description:e.description,bountyId:e.bountyId,bountyActionNo:e.bountyActionNo,isOwn:t.isOwn,joinStatus:t.bounty.joinStatus,joinActionStatus:e.joinStatus,thanksMessage:t.bounty.thanksMessage,thanksProfileImageUrl:t.bounty.account.profileImageUrl,dialogProfileImageUrl:t.bounty.account.profileImageUrl,joinCount:t.bounty.joinCount,participantLimit:t.bounty.participantLimit,completeStatus:t.bounty.completeStatus,actionJoinCount:e.joinCount,bauntyCanJoin:t.bauntyCanJoin,bountyTypeForAction:e.bountyActionType},on:{refreshJoin:function(e){t.refreshJoin()}}})}),1):2==t.tabNum?o("div",{staticClass:"activityArea"},[t._l(t.bountyJoins,function(e){return o("CardUser",{key:e.accountId,attrs:{profileImageUrl:e.profileImageUrl,displayName:e.displayName,date:e.createDateTime,accountName:e.accountName,isJoin:!0,dialogProfileImageUrl:t.bounty.account.profileImageUrl}})}),t._v(" "),o("infinite-loading",{on:{infinite:t.infiniteHandlerJoins}},[o("span",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),o("span",{attrs:{slot:"no-results"},slot:"no-results"})])],2):3==t.tabNum?o("div",{staticClass:"activityArea"},[t._l(t.bountyComments,function(e){return o("CardUser",{key:e.bountyCommentId,attrs:{profileImageUrl:e.account.profileImageUrl,displayName:e.account.displayName,date:e.postedDateTime,accountName:e.account.accountName,description:e.comment,commentId:e.bountyCommentId,replyBountyComment:e.replyComment,commentLikeCount:e.likeCount,dialogProfileImageUrl:t.bounty.account.profileImageUrl,canPostComment:t.bounty.canPostComment,commentAccountName:e.account.accountName,commentType:"Bounty"},on:{refreshComment:function(e){t.refreshComment()}}})}),t._v(" "),o("infinite-loading",{on:{infinite:t.infiniteHandlerComments}},[o("span",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),o("span",{attrs:{slot:"no-results"},slot:"no-results"})]),t._v(" "),o("div",{staticClass:"fixedBottom"},[o("div",{staticClass:"messageEntry"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{name:"discription",rows:"4",cols:"30",placeholder:"メッセージ",disabled:!t.bounty.canPostComment},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),o("input",{staticClass:"submitButton",class:{disable:t.isProcessing||!t.bounty.canPostComment},attrs:{type:"button",value:"送信する"},on:{click:function(e){t.addComment(t.message)}}})])])],2):t._e()]),t._v(" "),t.showModalDialog?o("ModalDialog",{attrs:{messages:t.dialogMessage,imageUrl:t.dialogImageUrl},on:{close:function(e){t.closeModalDialog()}}}):t._e()],1)};n._withStripped=!0;var a,i=o(1),s=o(14),r=o(74),u=o(225),c=o(220),l=o(245),p=o(214),m=o(219),d=o.n(m),y=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),f=function(t,e,o,n){var a,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(i<3?a(s):i>3?a(e,o,s):a(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},b=function(t,e,o,n){return new(o||(o=Promise))(function(a,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function r(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?a(t.value):new o(function(e){e(t.value)}).then(s,r)}u((n=n.apply(t,e||[])).next())})},h=function(t,e){var o,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}};i.Vue.directive("linkified",d.a);var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabNum=1,e.message=null,e.isProcessing=!1,e.isCommontSecret=!1,e.offsetJoins=s.a.API_PARAM.LIMIT_DEFAULT,e.offsetComments=s.a.API_PARAM.LIMIT_DEFAULT,e.showModalDialog=!1,e}return y(e,t),e.prototype.asyncData=function(t){var e=t.app,o=t.route,n=t.store;return b(this,void 0,void 0,function(){var t,a,i,u,c,l,p,m,d,y,f,b,g;return h(this,function(h){switch(h.label){case 0:return t="",a=!1,i=[""],[4,e.$axios.$get(s.a.API_URL.BOUNTIES+"/"+o.params.id)];case 1:return u=h.sent(),[4,e.$axios.$get(s.a.API_URL.BOUNTIES_ACTIONS.replace("{bounty_id}",o.params.id),{params:{offset:s.a.API_PARAM.OFFSET_DEFAULT,limit:s.a.API_PARAM.LIMIT_DEFAULT,sort:s.a.API_PARAM.SORT_NEW}})];case 2:return c=h.sent(),[4,e.$axios.$get(s.a.API_URL.BOUNTIES_JOIN.replace("{bounty_id}",o.params.id),{params:{offset:s.a.API_PARAM.OFFSET_DEFAULT,limit:s.a.API_PARAM.LIMIT_DEFAULT,sort:s.a.API_PARAM.SORT_NEW}})];case 3:return l=h.sent(),[4,e.$axios.$get(s.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",o.params.id),{params:{offset:s.a.API_PARAM.OFFSET_DEFAULT,limit:s.a.API_PARAM.LIMIT_DEFAULT}}).catch(function(t){return 400===t.response.status&&(a=!0,i=t.response.data.BadRequest),[{account:null,bountyId:null,bountyCommentId:null,comment:null,postedDateTime:null,replyCommentId:null,replyComment:null,clientCode:null,credentialId:null}]})];case 4:if(p=h.sent(),m=!1,u.account.accountName===n.state.myProfile.accountName&&(m=!0),n.state.myProfile.permissions)for(d=0,y=n.state.myProfile.permissions;d<y.length;d++)"A"===y[d]&&(a=!1);return t=1===u.completeStatus?"達成":2===u.completeStatus?"終了":1===u.publishStatus?"公開中":0===u.createStatus?"作成中":"非公開",f=!0,b=new r.a,u.participationEndDate&&1!==u.publishStatus&&(f=!1),b.dateNowCompare(b.stringToDataYmd(u.participationEndDate))<0&&(f=!1),u.joinCount&&u.participantLimit&&Number(u.joinCount)>=Number(u.participantLimit)&&(f=!1),g=s.a.POINT.WIP,[2,{bounty:u,bountyActions:c,bountyJoins:l,bountyComments:p,isOwn:m,pointName:g,isCommontSecret:a,isCommontSecretMessage:i,bountyStatsName:t,bauntyCanJoin:f,dialogImageUrl:s.a.TemplateImg.DIALOG_IMG_URL,faceBookShareUrl:b.encodeUrl("https://uliiq-wishhub.azurewebsites.net/bounties/"+u.bountyId)}]}})})},e.prototype.approvalBounty=function(t){return b(this,void 0,void 0,function(){var e,o=this;return h(this,function(n){switch(n.label){case 0:return this.isProcessing?[2]:(this.isProcessing=!0,(e=new FormData).append("BountyId",t),[4,this.$axios.post(s.a.API_URL.BOUNTIES_APPROVAL.replace("{bounty_id}",t),e).then(function(t){o.$emit("refreshJoin"),o.openModalDialog(["目標達成を承認しました。"])}).catch(function(t){400===t.response.status?o.openModalDialog(t.response.data.BadRequest):401===t.response.status?(o.openModalDialog(s.a.MESSAGE.ERR_401),o.$store.dispatch("logout")):o.openModalDialog(s.a.MESSAGE.ERR_ELSE)})]);case 1:return n.sent(),this.isProcessing=!1,[2]}})})},e.prototype.head=function(){return{title:"WishHub（ウィッシュハブ）|"+this.bounty.bountyName,meta:[{hid:"og:type",property:"og:type",content:"article"},{hid:"og:description",property:"og:description",content:this.bounty.description},{hid:"og:url",property:"og:url",content:"https://uliiq-wishhub.azurewebsites.net/bounties/"+this.bounty.bountyId},{hid:"og:image",property:"og:image",content:this.bounty.bountyImageUrl},{hid:"og:site_name",property:"og:site_name",content:"WishHub（ウィッシュハブ）|"+this.bounty.bountyName},{hid:"twitter:title",property:"twitter:title",content:"WishHub（ウィッシュハブ）|"+this.bounty.bountyName},{hid:"twitter:description",property:"twitter:description",content:this.bounty.description},{hid:"twitter:image",property:"twitter:image",content:this.bounty.bountyImageUrl}]}},e.prototype.tabNumChange=function(t){3===t&&this.isCommontSecret?this.openModalDialog(this.isCommontSecretMessage):this.tabNum=t},e.prototype.addComment=function(t){return b(this,void 0,void 0,function(){var e,o=this;return h(this,function(n){switch(n.label){case 0:return this.isProcessing||!this.bounty.canPostComment?[2]:(this.isProcessing=!0,e=new FormData,t?(e.append("BountyId",this.$route.params.id),e.append("Comment",t),[4,this.$axios.post(s.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",this.$route.params.id),e).then(function(){o.refreshComment(),o.message=null}).catch(function(t){400===t.response.status?o.openModalDialog(t.response.data.BadRequest):401===t.response.status?(o.openModalDialog(s.a.MESSAGE.ERR_401),o.$store.dispatch("logout")):o.openModalDialog(s.a.MESSAGE.ERR_ELSE)})]):[3,2]);case 1:n.sent(),n.label=2;case 2:return this.isProcessing=!1,[2]}})})},e.prototype.refreshComment=function(){var t=this;this.$axios.get(s.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",this.$route.params.id)).then(function(e){t.bountyComments=e.data}).catch(function(t){console.log(t)})},e.prototype.refreshJoin=function(){var t=this;this.$axios.get(s.a.API_URL.BOUNTIES_JOIN.replace("{bounty_id}",this.$route.params.id),{params:{offset:s.a.API_PARAM.OFFSET_DEFAULT,limit:s.a.API_PARAM.LIMIT_DEFAULT,sort:s.a.API_PARAM.SORT_NEW}}).then(function(e){t.bountyJoins=e.data,t.$axios.get(s.a.API_URL.BOUNTIES+"/"+t.$route.params.id).then(function(e){t.bounty=e.data,t.refreshComment(),t.isCommontSecret=!1}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)}),this.$axios.get(s.a.API_URL.BOUNTIES_ACTIONS.replace("{bounty_id}",this.$route.params.id),{params:{offset:s.a.API_PARAM.OFFSET_DEFAULT,limit:s.a.API_PARAM.LIMIT_DEFAULT,sort:s.a.API_PARAM.SORT_NEW}}).then(function(e){t.bountyActions=e.data}).catch(function(t){console.log(t)})},e.prototype.allowPush=function(t){var e=this;this.$store.dispatch("transitionAllow").then(function(){e.$router.push(t)})},e.prototype.openModalDialog=function(t){this.dialogMessage=t,this.showModalDialog=!0},e.prototype.closeModalDialog=function(){this.showModalDialog=!1},e.prototype.infiniteHandlerJoins=function(t){var e=this;2===this.tabNum&&this.$axios.get(s.a.API_URL.BOUNTIES_JOIN.replace("{bounty_id}",this.$route.params.id),{params:{offset:this.offsetJoins,limit:s.a.API_PARAM.LIMIT_DEFAULT,sort:s.a.API_PARAM.SORT_NEW}}).then(function(o){var n;o.data.length?(e.offsetJoins+=s.a.API_PARAM.LIMIT_DEFAULT,(n=e.bountyJoins).push.apply(n,o.data),t.loaded()):t.complete()}).catch(function(e){t.complete()})},e.prototype.infiniteHandlerComments=function(t){var e=this;3===this.tabNum&&this.$axios.get(s.a.API_URL.BOUNTIES_COMMENTS.replace("{bounty_id}",this.$route.params.id),{params:{offset:this.offsetComments,limit:s.a.API_PARAM.LIMIT_DEFAULT}}).then(function(o){var n;o.data.length?(e.offsetComments+=s.a.API_PARAM.LIMIT_DEFAULT,(n=e.bountyComments).push.apply(n,o.data),t.loaded()):t.complete()}).catch(function(e){t.complete()})},e=f([Object(i.Component)({components:{CardUser:u.a,CardBox:c.a,BountyType:l.a,ModalDialog:p.a}})],e)}(i.Vue),_=(o(278),o(6)),v=Object(_.a)(g,n,[],!1,null,"51bfe4b2",null);e.default=v.exports}}]);